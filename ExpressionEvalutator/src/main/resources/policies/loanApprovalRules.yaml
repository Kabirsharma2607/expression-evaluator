policyName: loanApprovalRules
description: Comprehensive loan approval decision engine with income, employment, and risk assessment
version: "1.0"

rules:
  # Income verification rules
  sufficientIncome:
    expression: "featureMap.monthlyIncome >= featureMap.requestedLoanAmount / featureMap.loanTermMonths * 3"
    description: "Monthly income covers 3x monthly loan payment"

  stableIncome:
    expression: "featureMap.incomeVariability <= 0.2"
    description: "Income shows stability (variability ≤20%)"

  verifiedIncome:
    expression: "featureMap.incomeVerified == true"
    description: "Income has been verified through documentation"

  # Employment verification rules
  stableEmployment:
    expression: "featureMap.currentEmploymentMonths >= 24"
    description: "Stable employment history (2+ years current job)"

  employmentGap:
    expression: "featureMap.employmentGapMonths <= 6"
    description: "No significant employment gap (≤6 months)"

  professionalEmployment:
    expression: "featureMap.employmentType == 'FULL_TIME' || featureMap.employmentType == 'PROFESSIONAL'"
    description: "Professional or full-time employment"

  # Asset and collateral rules
  adequateAssets:
    expression: "featureMap.liquidAssets >= featureMap.requestedLoanAmount * 0.1"
    description: "Liquid assets cover 10% of loan amount"

  collateralAvailable:
    expression: "featureMap.hasCollateral == true && featureMap.collateralValue >= featureMap.requestedLoanAmount * 1.2"
    description: "Sufficient collateral available (120% of loan)"

  emergencyFund:
    expression: "featureMap.liquidAssets >= featureMap.monthlyExpenses * 3"
    description: "Emergency fund covers 3 months expenses"

  # Loan-specific rules
  reasonableLoanTerm:
    expression: "featureMap.loanTermMonths >= 12 && featureMap.loanTermMonths <= 360"
    description: "Loan term between 1-30 years"

  appropriateLoanSize:
    expression: "featureMap.requestedLoanAmount >= 1000 && featureMap.requestedLoanAmount <= 1000000"
    description: "Loan amount between $1K-$1M"

  affordablePayment:
    expression: "featureMap.requestedLoanAmount / featureMap.loanTermMonths <= featureMap.monthlyIncome * 0.25"
    description: "Monthly payment ≤25% of monthly income"

  # Risk assessment rules
  lowRiskProfile:
    expression: "sufficientIncome && stableEmployment && adequateAssets && affordablePayment"
    dependencies: ["sufficientIncome", "stableEmployment", "adequateAssets", "affordablePayment"]
    description: "Low-risk borrower profile"

  mediumRiskProfile:
    expression: "(sufficientIncome && stableEmployment) || (adequateAssets && verifiedIncome)"
    dependencies: ["sufficientIncome", "stableEmployment", "adequateAssets", "verifiedIncome"]
    description: "Medium-risk borrower profile"

  # Final approval recommendations
  autoApproval:
    expression: "lowRiskProfile && verifiedIncome && emergencyFund && collateralAvailable"
    dependencies: ["lowRiskProfile", "verifiedIncome", "emergencyFund", "collateralAvailable"]
    description: "Automatic approval recommended"

  manualReview:
    expression: "mediumRiskProfile && (stableIncome || professionalEmployment)"
    dependencies: ["mediumRiskProfile", "stableIncome", "professionalEmployment"]
    description: "Manual review required"