policyName: riskAssessment
description: Comprehensive financial risk assessment policy for customer onboarding and portfolio management
version: "1.0"

rules:
  # Customer demographic risk factors
  ageRiskLow:
    expression: "featureMap.customerAge >= 25 && featureMap.customerAge <= 65"
    description: "Customer in low-risk age range (25-65)"

  ageRiskHigh:
    expression: "featureMap.customerAge < 25 || featureMap.customerAge > 65"
    description: "Customer in higher-risk age range"

  residentialStability:
    expression: "featureMap.residenceTimeMonths >= 24"
    description: "Stable residence history (2+ years)"

  homeOwnership:
    expression: "featureMap.residenceType == 'OWNED' || featureMap.residenceType == 'MORTGAGE'"
    description: "Home ownership indicates stability"

  # Financial behavior patterns
  bankingRelationship:
    expression: "featureMap.bankRelationshipMonths >= 12"
    description: "Established banking relationship (1+ year)"

  savingsHabit:
    expression: "featureMap.averageMonthlySavings > 0 && featureMap.savingsToIncomeRatio >= 0.05"
    description: "Positive savings behavior (5%+ of income)"

  paymentHistory:
    expression: "featureMap.latePaymentsLast12Months == 0"
    description: "No late payments in last 12 months"

  overdraftHistory:
    expression: "featureMap.overdraftsLast12Months <= 2"
    description: "Minimal overdraft incidents"

  # Financial ratios and metrics
  healthyDebtRatio:
    expression: "featureMap.totalDebtToIncomeRatio <= 0.36"
    description: "Healthy total debt-to-income ratio (≤36%)"

  adequateLiquidity:
    expression: "featureMap.liquidityRatio >= 0.1"
    description: "Adequate liquidity ratio (≥10%)"

  diversifiedIncome:
    expression: "featureMap.incomeSourcesCount >= 2 || featureMap.primaryIncomeStability >= 0.8"
    description: "Diversified or highly stable income"

  # External risk factors
  industryRisk:
    expression: "featureMap.industryRiskScore <= 3"
    description: "Low to moderate industry risk (score ≤3)"

  geographicRisk:
    expression: "featureMap.geographicRiskScore <= 2"
    description: "Low geographic/regional risk (score ≤2)"

  economicIndicators:
    expression: "featureMap.localUnemploymentRate <= 0.06"
    description: "Favorable local economic conditions"

  # Composite risk scores
  lowRiskCustomer:
    expression: "ageRiskLow && residentialStability && homeOwnership && bankingRelationship && paymentHistory && healthyDebtRatio"
    dependencies: ["ageRiskLow", "residentialStability", "homeOwnership", "bankingRelationship", "paymentHistory", "healthyDebtRatio"]
    description: "Low-risk customer profile"

  mediumRiskCustomer:
    expression: "(ageRiskLow && bankingRelationship && healthyDebtRatio) || (savingsHabit && paymentHistory && adequateLiquidity)"
    dependencies: ["ageRiskLow", "bankingRelationship", "healthyDebtRatio", "savingsHabit", "paymentHistory", "adequateLiquidity"]
    description: "Medium-risk customer profile"

  environmentalRisk:
    expression: "industryRisk && geographicRisk && economicIndicators"
    dependencies: ["industryRisk", "geographicRisk", "economicIndicators"]
    description: "Favorable environmental risk factors"